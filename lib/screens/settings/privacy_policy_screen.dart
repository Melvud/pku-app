import 'package:flutter/material.dart';

class PrivacyPolicyScreen extends StatelessWidget {
  const PrivacyPolicyScreen({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Политика конфиденциальности'),
      ),
      body: SingleChildScrollView(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              'Политика конфиденциальности PheTracker',
              style: Theme.of(context).textTheme.headlineSmall?.copyWith(
                    fontWeight: FontWeight.bold,
                  ),
            ),
            const SizedBox(height: 8),
            Text(
              'Последнее обновление: 15 ноября 2024 г.',
              style: TextStyle(
                color: Colors.grey.shade600,
                fontSize: 13,
              ),
            ),
            const SizedBox(height: 24),
            const _Section(
              title: '1. Введение',
              content:
                  'Мы, разработчики приложения PheTracker ("Приложение"), серьезно относимся к защите вашей конфиденциальности. Эта Политика конфиденциальности объясняет, как мы собираем, используем, храним и защищаем вашу личную информацию при использовании нашего Приложения.\n\nИспользуя Приложение, вы соглашаетесь с условиями данной Политики конфиденциальности. Если вы не согласны с какими-либо условиями, пожалуйста, не используйте Приложение.',
            ),
            const _Section(
              title: '2. Какую информацию мы собираем',
              subtitle: '2.1. Информация, которую вы предоставляете',
              content:
                  'При регистрации и использовании Приложения мы можем собирать следующую информацию:\n\n• Личные данные: имя, возраст, вес, адрес электронной почты\n• Медицинские данные: суточная толерантность фенилаланина, используемая лечебная смесь\n• Данные о питании: информация о потребляемых продуктах, размерах порций, времени приема пищи\n• Пользовательский контент: собственные продукты, заметки, комментарии',
            ),
            const _Section(
              subtitle: '2.2. Автоматически собираемая информация',
              content:
                  'При использовании Приложения автоматически собирается:\n\n• Технические данные: тип устройства, операционная система, уникальный идентификатор устройства\n• Данные об использовании: функции, которые вы используете, время и частота использования\n• Данные о сбоях: информация о технических ошибках для улучшения стабильности',
            ),
            const _Section(
              title: '3. Как мы используем вашу информацию',
              content:
                  'Мы используем собранную информацию для следующих целей:\n\n• Предоставление и поддержка функциональности Приложения\n• Расчет потребления фенилаланина и других нутриентов\n• Создание статистики и аналитики питания\n• Синхронизация данных между вашими устройствами\n• Улучшение качества и функциональности Приложения\n• Техническая поддержка и устранение неполадок\n• Отправка важных уведомлений о работе Приложения\n• Соблюдение законодательных требований',
            ),
            const _Section(
              title: '4. Как мы храним и защищаем информацию',
              subtitle: '4.1. Хранение данных',
              content:
                  'Ваши данные хранятся:\n\n• Локально на вашем устройстве\n• В облачном хранилище Firebase (Google Cloud Platform) с шифрованием\n• На защищенных серверах с применением современных мер безопасности',
            ),
            const _Section(
              subtitle: '4.2. Меры безопасности',
              content:
                  'Мы применяем следующие меры безопасности:\n\n• Шифрование данных при передаче (SSL/TLS)\n• Шифрование данных при хранении\n• Регулярные проверки безопасности\n• Ограниченный доступ к персональным данным\n• Регулярное резервное копирование\n\nОднако, несмотря на все меры, ни один метод передачи данных через интернет не является на 100% безопасным.',
            ),
            const _Section(
              title: '5. Передача данных третьим лицам',
              content:
                  'Мы НЕ продаем, не обмениваем и не сдаем в аренду вашу личную информацию третьим лицам.\n\nМы можем передавать ваши данные только:\n\n• Поставщикам облачных услуг (Firebase/Google) для хранения и синхронизации\n• Сервисам аналитики для улучшения Приложения (с деперсонализированными данными)\n• По требованию закона или правоохранительных органов\n\nВсе третьи стороны обязаны соблюдать конфиденциальность ваших данных.',
            ),
            const _Section(
              title: '6. Ваши права',
              content:
                  'Вы имеете право:\n\n• Получить доступ к своим персональным данным\n• Исправить неточные данные\n• Удалить свои данные ("право на забвение")\n• Ограничить обработку данных\n• Экспортировать свои данные (портативность данных)\n• Отозвать согласие на обработку данных\n• Подать жалобу в надзорный орган\n\nДля реализации своих прав свяжитесь с нами по адресу: support@phetracker.app',
            ),
            const _Section(
              title: '7. Медицинская информация',
              content:
                  'ВАЖНО: Приложение PheTracker предназначено только для информационных целей и не является медицинским прибором.\n\n• Приложение НЕ заменяет консультации с врачом\n• Все решения о диете должны приниматься под наблюдением врача\n• Мы НЕ несем ответственности за медицинские последствия использования Приложения\n• Всегда консультируйтесь с врачом перед изменением диеты',
            ),
            const _Section(
              title: '8. Дети',
              content:
                  'Приложение может использоваться для отслеживания питания детей, но аккаунт должен создаваться родителем или законным представителем. Мы не собираем сознательно персональные данные детей младше 18 лет без согласия родителей.',
            ),
            const _Section(
              title: '9. Изменения в Политике конфиденциальности',
              content:
                  'Мы можем периодически обновлять эту Политику конфиденциальности. О значительных изменениях мы уведомим вас через:\n\n• Push-уведомления в Приложении\n• Электронную почту\n• Уведомление при следующем запуске Приложения\n\nПродолжение использования Приложения после изменений означает ваше согласие с новой Политикой.',
            ),
            const _Section(
              title: '10. Срок хранения данных',
              content:
                  'Мы храним ваши персональные данные только до тех пор, пока это необходимо для целей, указанных в данной Политике, или пока вы не удалите свой аккаунт.\n\nПосле удаления аккаунта:\n• Ваши данные будут удалены в течение 30 дней\n• Некоторые данные могут храниться для соблюдения законодательных требований\n• Резервные копии удаляются в течение 90 дней',
            ),
            const _Section(
              title: '11. Международная передача данных',
              content:
                  'Ваши данные могут обрабатываться на серверах, расположенных в разных странах. Мы обеспечиваем соответствующий уровень защиты при международной передаче данных в соответствии с применимым законодательством.',
            ),
            const _Section(
              title: '12. Cookies и технологии отслеживания',
              content:
                  'Приложение не использует cookies или технологии отслеживания для рекламы. Мы используем только необходимые технологии для обеспечения функциональности Приложения.',
            ),
            const _Section(
              title: '13. Контактная информация',
              content:
                  'Если у вас есть вопросы по этой Политике конфиденциальности или вы хотите воспользоваться своими правами, свяжитесь с нами:\n\nEmail: support@phetracker.app\nВеб-сайт: www.phetracker.app',
            ),
            const SizedBox(height: 32),
            Container(
              padding: const EdgeInsets.all(16),
              decoration: BoxDecoration(
                color: Colors.blue.shade50,
                borderRadius: BorderRadius.circular(12),
                border: Border.all(color: Colors.blue.shade200),
              ),
              child: Row(
                children: [
                  Icon(Icons.security, color: Colors.blue.shade700),
                  const SizedBox(width: 12),
                  Expanded(
                    child: Text(
                      'Ваша конфиденциальность важна для нас. Мы постоянно работаем над улучшением защиты ваших данных.',
                      style: TextStyle(
                        fontSize: 13,
                        color: Colors.blue.shade900,
                        height: 1.4,
                      ),
                    ),
                  ),
                ],
              ),
            ),
            const SizedBox(height: 32),
          ],
        ),
      ),
    );
  }
}

class _Section extends StatelessWidget {
  final String? title;
  final String? subtitle;
  final String content;

  const _Section({
    this.title,
    this.subtitle,
    required this.content,
  });

  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: const EdgeInsets.only(bottom: 24),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          if (title != null) ...[
            Text(
              title!,
              style: const TextStyle(
                fontSize: 18,
                fontWeight: FontWeight.bold,
              ),
            ),
            const SizedBox(height: 12),
          ],
          if (subtitle != null) ...[
            Text(
              subtitle!,
              style: const TextStyle(
                fontSize: 16,
                fontWeight: FontWeight.w600,
              ),
            ),
            const SizedBox(height: 8),
          ],
          Text(
            content,
            style: const TextStyle(
              fontSize: 14,
              height: 1.6,
            ),
            textAlign: TextAlign.justify,
          ),
        ],
      ),
    );
  }
}